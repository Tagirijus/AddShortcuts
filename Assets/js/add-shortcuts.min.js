var addShortcutsPresets=$ADDSHORTCUTPRESETS$;function tagiShortcuts(o){return()=>{o(),KB.onKey("Home",function(){window.location="/"}),KB.onKey("v+c",function(){window.location="/addshortcuts/completedLastWeek"}),KB.onKey("v+v+c",function(){window.location="/addshortcuts/completedThisWeek"}),KB.onKey("v+a",function(){console.log("/bigboard"+getCurrentFilterFromURI()),window.location="/bigboard"+getCurrentFilterFromURI()}),KB.onKey("v+t",function(){var o;KB.modal.isOpen()||(o=document.documentElement.innerHTML.match(/\/user\/show\/(\d+)/))&&(o=o[1],window.location="/dashboard/"+o+"/tasks")}),KB.onKey("a+a",function(){var o;KB.modal.isOpen()||null!=(o=document.getElementById("form-project_id"))&&(o=o.value,KB.modal.open("/analytics/tasks/"+o,"large",!1))}),KB.exists("#task-view")&&(KB.onKey("t",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#addSpentTimeMenu").data("addurl"),"small",!1)}),KB.onKey("T",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#changeEstimatedTimeMenu").data("addurl"),"small",!1)}),KB.onKey("S",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#subtaskHelperConvert").data("addurl"),"small",!1)}),KB.onKey("g",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#subtaskHelperCombine").data("addurl"),"small",!1)}),KB.onKey("E",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#subtaskHelperEditSubtask").data("addurl"),"small",!1)}),KB.onKey("D",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#subtaskHelperRemoveAll").data("addurl"),"small",!1)}),KB.onKey("d",function(){KB.modal.isOpen()||KB.modal.open(KB.find("#duplicateModDuplicateInstant").data("addurl"),"small",!1)}),KB.onKey("C",function(){KB.modal.isOpen()||KB.modal.open(getLastCommentEditURL(),"medium",!1)})),KB.onKey("B",function(){KB.modal.isOpen()||KB.trigger("task.selector.open")}),KB.onKey("A",function(){KB.modal.isOpen()||KB.modal.open(addAddShortcutPresetModal(),"small",!1)}),Array.prototype.forEach.call(addShortcutsPresets,(o,e)=>{""!=o.key&&KB.onKey(o.key,function(){window.location=o.url})}),KB.onKey("F",function(){var o;KB.modal.isOpen()||(KB.modal.open("/addshortcuts/shortcutPresetSelectModal","small",!1),o=setInterval(()=>{KB.modal.isOpen()&&(KB.trigger("shortcutpreset.selector.open"),clearInterval(o))},1))})}}function addAddShortcutPresetModal(){return"/addshortcuts/addCustomShortcutModal?uri="+(window.location.pathname+encodeURIComponent(window.location.search))}function getCurrentFilterFromURI(){var o=window.location.href.indexOf("search");return-1<o?"?search="+window.location.href.substr(o+7):"?search=status%3Aopen"}function getTaskID(){const o=window.location.href;var e=o.match(/task_id=(\d+)/);if(e)return parseInt(e[1]);return(e=o.match(/\/task\/(\d+)/))?parseInt(e[1]):null}function findNewestCommentID(){let e=-1;const o=document.querySelectorAll('div[id^="comment-"]');return o.forEach(o=>{o=parseInt(o.id.replace("comment-",""));o>e&&(e=o)}),e}function getLastCommentEditURL(){return"/task/"+getTaskID()+"/comment/"+findNewestCommentID()+"/edit"}KB.keyboardShortcuts=tagiShortcuts(KB.keyboardShortcuts);